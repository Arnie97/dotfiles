#!/bin/bash

function ignore {
    if [[ `git ls-files -v "$1" | grep '^[a-z]' | wc -l | xargs echo` -eq 1 ]]; then
        git update-index --no-assume-unchanged "$1" && echo "track the changes of '$1'"
    else
        git update-index --assume-unchanged "$1" && echo "now assume '$1' is unchanged"
    fi
}

if [[ "$#" -eq 0 ]]; then
    git ls-files -v
else
    for pathspec in "$@"; do
        ignore "$pathspec"
    done
fi
